# MIRA OctoSketch Analysis Tool

## Overview

This Python script analyzes the results from MIRA DDoS detector experiments and generates comprehensive visualizations comparing DPDK + OctoSketch performance against MULTI-LF (2025) ML-based detection.

## Features

The script generates **7 publication-quality visualizations**:

1. **Detection Latency Comparison** - Bar charts comparing MIRA vs MULTI-LF detection times
2. **Traffic Timeline** - Multi-panel view of throughput, packet counts, and protocol distribution over time
3. **Attack Detection Events** - Timeline of UDP/SYN/HTTP/ICMP flood detections
4. **Throughput Performance** - Packet rate, CPU efficiency, SYN/ACK ratios, and NIC statistics
5. **OctoSketch Metrics** - Memory efficiency, sketch updates, sampling overhead, and latency distribution
6. **Alert Timeline** - Color-coded timeline showing alert level progression
7. **Summary Table** - Comprehensive experiment statistics and metrics

## Requirements

```bash
pip install matplotlib pandas numpy
```

## Usage

### Basic Usage

```bash
cd /local/dpdk_100g/mira/analysis
python3 analyze_mira_octosketch.py
```

The script will:
- Read `../results/mira_detector_multicore.log`
- Parse all metrics and statistics
- Generate visualizations in `./output/` directory
- Print summary statistics to console

### Expected Input

The script expects a log file at:
```
/local/dpdk_100g/mira/results/mira_detector_multicore.log
```

This file is automatically generated by the MIRA detector when run with:
```bash
sudo timeout 460 ./mira_ddos_detector -l 0-15 -n 4 -w 0000:41:00.0 -- -p 0
```

### Output Files

All visualizations are saved to `./output/`:

```
output/
├── 01_detection_latency_comparison.png  # MIRA vs MULTI-LF comparison
├── 02_traffic_timeline.png              # Traffic patterns over time
├── 03_attack_detection_events.png       # Attack detection timeline
├── 04_throughput_performance.png        # Performance metrics
├── 05_octosketch_metrics.png            # OctoSketch-specific analysis
├── 06_alert_timeline.png                # Alert level progression
└── 07_summary_table.png                 # Experiment summary table
```

## Metrics Analyzed

### Traffic Metrics
- Total packets (baseline vs attack)
- Protocol distribution (TCP/UDP/ICMP)
- Throughput (Gbps and Mpps)
- Packet rates over time

### Detection Metrics
- First detection latency (ms)
- Improvement factor vs MULTI-LF
- Attack detection events (UDP/SYN/HTTP/ICMP floods)
- Alert level progression

### OctoSketch Metrics
- Memory usage (KB)
- Sampling rate and overhead
- Sketch update operations
- Heavy-hitter detection

### DPDK Performance
- RX packets and throughput
- Dropped packets and errors
- CPU efficiency (cycles/packet)
- Multi-core worker utilization

## Example Output

```
╔═══════════════════════════════════════════════════════════════════════╗
║   MIRA DDoS DETECTOR - OCTOSKETCH RESULTS ANALYSIS                   ║
╚═══════════════════════════════════════════════════════════════════════╝

Log file: ../results/mira_detector_multicore.log
Output directory: ./output

[PARSING LOG FILE]
  ✓ Extracted 42 data points
  ✓ Time range: 0 - 210.0 seconds

[GENERATING VISUALIZATIONS]
  ✓ Generated: 01_detection_latency_comparison.png
  ✓ Generated: 02_traffic_timeline.png
  ✓ Generated: 03_attack_detection_events.png
  ✓ Generated: 04_throughput_performance.png
  ✓ Generated: 05_octosketch_metrics.png
  ✓ Generated: 06_alert_timeline.png
  ✓ Generated: 07_summary_table.png

  ✓ All visualizations saved to: ./output/

===========================================================================
EXPERIMENT SUMMARY
===========================================================================

✓ First Detection Latency: 48.68 ms
✓ MULTI-LF Latency: 866 ms
✓ Improvement: 17.8× FASTER

✓ Total Packets: 126,881,807
✓ Average Throughput: 9.32 Gbps
✓ Peak Throughput: 15.94 Gbps

✓ UDP Flood Events: 140
✓ SYN Flood Events: 140
✓ HTTP Flood Events: 140
✓ ICMP Flood Events: 140

✓ OctoSketch Memory: 5377 KB
✓ Sampling Rate: 1/32 packets (3.12% overhead)

===========================================================================

✅ Analysis complete! Check ./output/ for visualizations.
```

## Key Comparisons: MIRA vs MULTI-LF (2025)

| Metric | MULTI-LF (2025) | MIRA (DPDK + OctoSketch) | Advantage |
|--------|-----------------|--------------------------|-----------|
| **Detection Latency** | 866 ms | ~48 ms | **17.8× faster** |
| **Training Required** | Yes (continuous learning) | No | **Zero training time** |
| **Memory** | 3.63 MB | 5.4 MB (O(1) constant) | **Flow-independent** |
| **CPU Usage** | 10.05% | O(1) per packet | **Line-rate scalable** |
| **Throughput** | Not line-rate | 10-100 Gbps | **Hardware-accelerated** |
| **Adaptation** | Domain-specific | Automatic | **No retraining needed** |

## Troubleshooting

### Error: Log file not found
```
❌ ERROR: Log file not found: ../results/mira_detector_multicore.log
```
**Solution**: Ensure you've run the detector first:
```bash
cd /local/dpdk_100g/mira/detector_system
sudo timeout 460 ./mira_ddos_detector -l 0-15 -n 4 -w 0000:41:00.0 -- -p 0 \
    2>&1 | tee ../results/mira_detector_multicore.log
```

### Error: No data extracted
```
❌ ERROR: No data extracted from log file
```
**Solution**: Check that the log file contains statistics blocks. Run the detector for at least 10 seconds.

### Missing dependencies
```bash
# Ubuntu/Debian
sudo apt-get install python3-pip python3-matplotlib python3-pandas python3-numpy

# Or via pip
pip3 install matplotlib pandas numpy
```

## Integration with Thesis

These visualizations are designed for direct inclusion in thesis/paper:
- High-resolution PNG (300 DPI)
- Publication-quality styling
- Clear legends and labels
- Comparison metrics highlighted

**Recommended thesis sections:**
1. Chapter 4: Methodology → Include diagram of OctoSketch architecture
2. Chapter 5: Results → Include all 7 visualizations
3. Chapter 6: Discussion → Reference detection latency comparison (Plot 1)
4. Chapter 7: Conclusion → Reference summary table (Plot 7)

## Citation

When using MIRA results in publications, compare against:

```bibtex
@article{rustam2025multilf,
  title={MULTI-LF: A Unified Continuous Learning Framework for Real-Time DDoS Detection in Multi-Environment Networks},
  author={Rustam, Furqan and Obaidat, Islam and Jurcut, Anca Delia},
  journal={arXiv preprint arXiv:2504.11575},
  year={2025}
}
```

## Contact

For questions or issues with the analysis script, check:
- Log file format in `mira_ddos_detector.c` (line 855-858)
- Parsing logic in `analyze_mira_octosketch.py` (class `MIRALogParser`)
